(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=require("path");var n=e.n(t);const o=require("electron"),i={label:"App",submenu:[{label:"Quit",accelerator:"CmdOrCtrl+Q",click:()=>{o.app.quit()}}]},r=require("fs");var a=e.n(r);const s=require("fs-jetpack");var l=e.n(s);const c=require("url");var p=e.n(c);let h;const d=n().join(process.env.APPDATA,"../LocalLow/swolekat/vmc-replay/"),u={label:"File",submenu:[{label:"Open Saved File Location",click:()=>{o.shell.openPath(d)}},{type:"separator"},{label:"Load from File",click:()=>{o.dialog.showOpenDialog({filters:[{name:"JSON Files",extensions:["json"]}],properties:["openFile","multiSelections"]}).then((({canceled:e,filePaths:t})=>{e||(console.log(d),console.log(t.join(", ")),t.forEach((e=>{const t=a().readFileSync(e),n=e.split("\\"),o=n[n.length-1];a().writeFileSync(`${d}\\${o}`,t)})),h.webContents.send("re-render"))}))}}]},g=n().join(process.env.APPDATA,"../LocalLow/swolekat/vmc-replay/");a().existsSync(g)||a().mkdirSync(g),o.app.on("ready",(()=>{(()=>{const e=[i,u];o.Menu.setApplicationMenu(o.Menu.buildFromTemplate(e))})(),o.ipcMain.on("need-app-path",((e,t)=>{e.reply("app-path",{pathToSettingsDirectory:g})})),h=((e,t)=>{const n=l().cwd(o.app.getPath("userData")),i=`window-state-${e}.json`,r={width:t.width,height:t.height};let a,s={};return s=(e=>{const t=o.screen.getAllDisplays().some((t=>((e,t)=>e.x>=t.x&&e.y>=t.y&&e.x+e.width<=t.x+t.width&&e.y+e.height<=t.y+t.height)(e,t.bounds)));return t?e:(()=>{const e=o.screen.getPrimaryDisplay().bounds;return Object.assign({},r,{x:(e.width-r.width)/2,y:(e.height-r.height)/2})})()})((()=>{let e={};try{e=n.read(i,"json")}catch(e){}return Object.assign({},r,e)})()),a=new o.BrowserWindow(Object.assign({},t,s)),a.on("close",(()=>{a.isMinimized()||a.isMaximized()||Object.assign(s,(()=>{const e=a.getPosition(),t=a.getSize();return{x:e[0],y:e[1],width:t[0],height:t[1]}})()),n.write(i,s,{atomic:!0})})),a})("main",{width:1e3,height:600,webPreferences:{nodeIntegration:!0,contextIsolation:!1,enableRemoteModule:!1,backgroundThrottling:!1}}),h.loadURL(p().format({pathname:n().join(__dirname,"app.html"),protocol:"file:",slashes:!0}))})),o.app.on("window-all-closed",(()=>{o.app.quit()}))})();
//# sourceMappingURL=main.js.map